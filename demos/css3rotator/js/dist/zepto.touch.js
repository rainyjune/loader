!function(factory){if("undefined"!=typeof define&&define.cmd)define(function(require,exports,module){var $=require("zepto");factory($)});else{var $=Zepto;factory($)}}(function($){function mousestartHandler(event){initAllVar(),startPageX=event.pageX,startPageY=event.pageY,touchX=event.clientX,touchY=event.clientY,nowPageX=event.pageX,nowPageY=event.pageY,tapStart();var el=$(event.target)||$(document);el.trigger("swipeStartMy")}function mousemoveHandler(event){if(null!==touchX&&null!==touchY){nowPageX=event.pageX,nowPageY=event.pageY,nowX=event.clientX,nowY=event.clientY,movedPageX=nowPageX-startPageX,movedPageY=nowPageY-startPageY;var el=$(event.target)||$(document);el.trigger("swipeProgressMy",[movedPageX,movedPageY])}}function touchstartHandler(event){initAllVar(),startPageX=event.touches[0].pageX,startPageY=event.touches[0].pageY,touchX=event.touches[0].clientX,touchY=event.touches[0].clientY,nowPageX=event.touches[0].pageX,nowPageY=event.touches[0].pageY,tapStart();var el=$(event.target)||$(document);el.trigger("swipeStartMy")}function touchmoveHandler(event){nowPageX=event.touches[0].pageX,nowPageY=event.touches[0].pageY,nowX=event.touches[0].clientX,nowY=event.touches[0].clientY,movedPageX=nowPageX-startPageX,movedPageY=nowPageY-startPageY,Math.abs(nowX-touchX)>10&&Math.abs(nowY-touchY)<25&&event.preventDefault();var el=$(event.target)||$(document);el.trigger("swipeProgressMy",[movedPageX,movedPageY])}function touchendHandler(event){var isTap=tapEnd(event);if(isTap)return!1;if(null===nowX||null===nowY)return void initAllVar();movX=Math.abs(touchX-nowX),movY=Math.abs(touchY-nowY);var el=$(event.target)||$(document);movX>horizontalOffset||movY>verticalOffset?(el.trigger("swipeMy"),el.trigger("swipe"+swipeDirection(touchX,nowX,touchY,nowY)+"My")):el.trigger("swipeCancelMy"),initAllVar()}function pointerDown(event){initAllVar(),touchX=event.clientX,touchY=event.clientY,startPageX=event.pageX,startPageY=event.pageY,nowPageX=event.pageX,nowPageY=event.pageY,tapStart();var el=$(event.target)||$(document);el.trigger("swipeStartMy")}function pointerMove(event){nowX=event.clientX,nowY=event.clientY,nowPageX=event.pageX,nowPageY=event.pageY,movedPageX=nowPageX-startPageX,movedPageY=nowPageY-startPageY;var el=$(event.target)||$(document);el.trigger("swipeProgressMy",[movedPageX,movedPageY])}function pointerUp(event){var isTap=tapEnd(event);if(isTap)return!1;if(null!==nowX&&null!==nowY){movX=Math.abs(touchX-nowX),movY=Math.abs(touchY-nowY);var el=$(event.target)||$(document);movX>horizontalOffset||movY>verticalOffset?(el.trigger("swipeMy"),el.trigger("swipe"+swipeDirection(touchX,nowX,touchY,nowY)+"My")):el.trigger("swipeCancelMy")}}function pointerCancel(event){pointerUp(event)}function swipeDirection(x1,x2,y1,y2){return Math.abs(x1-x2)>=Math.abs(y1-y2)?x1-x2>0?"Left":"Right":y1-y2>0?"Up":"Down"}function initAllVar(){touchX=null,touchY=null,movX=null,movY=null,nowX=null,nowY=null,startPageX=null,startPageY=null,nowPageX=null,nowPageY=null,movedPageX=null,movedPageY=null}function alertMy(string){isDebug&&alert(string)}function approximatelyEqual(a,b){return Math.abs(a-b)<2}function tapStart(){isTapLength=!0,tapLengthTimeout&&clearTimeout(tapLengthTimeout),tapLengthTimeout=setTimeout(function(){isTapLength=!1},200)}function tapEnd(event){var el=$(event.target)||$(document);return isTapLength&&approximatelyEqual(startPageX,nowPageX)&&approximatelyEqual(startPageY,nowPageY)?(event.preventDefault(),el.trigger("tapMy"),!0):!1}var movX,movY,startPageX,startPageY,nowPageX,nowPageY,movedPageX,movedPageY,isTapLength,tapLengthTimeout,touchX=null,touchY=null,nowX=null,nowY=null,horizontalOffset=20,verticalOffset=30,isDebug=!1;window.PointerEvent?(alertMy("pinterEvent"),$(document).on("pointerdown",pointerDown),$(document).on("pointermove",pointerMove),$(document).on("pointerup",pointerUp),$(document).on("pointercancel",pointerCancel)):window.navigator.msPointerEnabled?(alertMy("IE 10"),$(document).on("MSPointerDown",pointerDown),$(document).on("MSPointerMove",pointerMove),$(document).on("MSPointerUp",pointerUp),$(document).on("MSPointerCancel",pointerCancel)):"ontouchstart"in document.documentElement||"ontouchstart"in window?(alertMy("normal2"),$(document).on("touchstart",touchstartHandler),$(document).on("touchmove",touchmoveHandler),$(document).on("touchend",touchendHandler),$(document).on("touchleave",touchendHandler),$(document).on("touchcancel",touchendHandler)):(alertMy("mouse"),$(document).on("mousedown",mousestartHandler),$(document).on("mousemove",mousemoveHandler),$(document).on("mouseup",touchendHandler),$(document).on("mouseleave",touchendHandler)),["swipeMy","swipeLeftMy","swipeRightMy","swipeUpMy","swipeDownMy","swipeStartMy","swipeCancelMy","swipeProgressMy","tapMy"].forEach(function(eventName){$.fn[eventName]=function(callback){return this.on(eventName,callback)}})});